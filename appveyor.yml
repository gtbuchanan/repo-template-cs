image: Visual Studio 2017

environment:
  COVERALLS_TOKEN:
    secure: tTq4P0GrdPB/inZJI3hLcM+3PXnODHNpjSLi2DeNR1A6bRoI/gvyp/ZMmbzW+wP5

build_script:
  ps: ./build -CoverallsToken $env:COVERALLS_TOKEN
  ps: |
    $wc = New-Object 'System.Net.WebClient'
    $wc.UploadFile("https://ci.appveyor.com/api/testresults/mstest/$($env:APPVEYOR_JOB_ID)", (Resolve-Path artifacts\TestResults\TestResults.trx))

artifacts:
  path: artifacts/TestResults